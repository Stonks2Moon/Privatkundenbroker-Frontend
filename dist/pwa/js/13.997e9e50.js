(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{b302:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.stockData.name?r("q-page",{attrs:{padding:""}},[r("div",{staticClass:"row items-center"},[r("div",{staticClass:"row col-md-2 col-xs-10 items-center"},[r("q-btn",{attrs:{round:"",padding:"none",flat:"",size:"22px",icon:"navigate_before",to:"/order"}}),r("div",{staticClass:"text-h5 text-weight-bold"},[e._v("\n        "+e._s(e.stockData.name)+"\n      ")])],1),r("q-space"),r("div",{staticClass:"row col-md-10 col-xs-12"},[r("q-space")],1)],1),r("div",{staticClass:"col column q-ma-xs items-center"},[r("div",{staticClass:"row full-width items-center q-ma-sm"},[r("q-item",{staticClass:"rounded-borders text-bold items-center",class:"bg-"+(e.marketOpen?"green":"red"),attrs:{dense:""}},[e.marketOpen?r("div",[e._v(e._s(e.$t("live").toUpperCase()))]):r("div",[e._v(e._s(e.$t("closed").toUpperCase()))])]),r("div",{staticClass:"q-px-xs text-bold",staticStyle:{"font-size":"25px"}},[e._v("\n        "+e._s(e.stockPrice)+"\n      ")]),e._v("\n      EUR\n      "),r("q-space"),r("q-item",{staticClass:"q-pa-xs rounded-borders text-bold items-center",class:"bg-"+e.statusColor,staticStyle:{"min-width":"85px"},attrs:{clickable:"",dense:""},on:{click:e.toggleTrendData}},[r("q-icon",{attrs:{name:e.trendAbsolute<0?"arrow_drop_down":0===Number(e.trendAbsolute)?"horizontal_rule":"arrow_drop_up",size:"150%"}}),e.showPercentageTrendData?r("div",[e._v(e._s(e.trendPercentage)+" %")]):r("div",[e._v(e._s(e.trendAbsolute)+" €")])],1)],1),r("StockChart",{attrs:{historyData:e.historyData,name:e.stockData.name}}),r("q-card",{staticClass:"column shadow-10 full-width bg-dark q-ma-md"},[r("q-card-section",[r("div",{staticClass:"row no-wrap items-center"},[r("q-btn",{staticClass:"col-6 q-mr-xs",attrs:{outline:!e.isBuyButtonPressed,"no-caps":"",label:e.$t("buy"),color:"green"},on:{click:function(t){return e.toggleIsBuyButtonPressed("Buy")}}}),r("q-btn",{staticClass:"col-6",attrs:{outline:e.isBuyButtonPressed,"no-caps":"",label:e.$t("sell"),color:"red"},on:{click:function(t){return e.toggleIsBuyButtonPressed("Sell")}}})],1)]),r("q-card-section",[r("q-select",{attrs:{square:"",filled:"",options:e.orderTypeOptions,label:e.$t("orderType")},model:{value:e.selectedOrderType,callback:function(t){e.selectedOrderType=t},expression:"selectedOrderType"}})],1),"Limit"===e.selectedOrderType?r("div",[r("q-card-section",[r("q-input",{attrs:{filled:"",type:"number",label:e.$t("price"),suffix:"€"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growPriceForLimitOrder}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reducePriceForLimitOrder}})]},proxy:!0}],null,!1,3379900149),model:{value:e.limitOrderPrice,callback:function(t){e.limitOrderPrice=t},expression:"limitOrderPrice"}})],1),r("q-card-section",[r("q-input",{attrs:{filled:"",rules:[function(t){return t>=0||e.$t("onlyPositiveNumber")}],"lazy-rules":"","hide-bottom-space":"",label:e.$t("amount")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growAmountOfShares}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reduceAmountOfShares}})]},proxy:!0}],null,!1,3137080629),model:{value:e.amountOfShares,callback:function(t){e.amountOfShares=e._n(t)},expression:"amountOfShares"}})],1),r("q-card-section",[r("q-input",{attrs:{disable:"",filled:"",label:e.$t("overallCalculatedPrice"),suffix:"€"},model:{value:e.calculatedPriceForLimitOrder,callback:function(t){e.calculatedPriceForLimitOrder=e._n(t)},expression:"calculatedPriceForLimitOrder"}})],1)],1):e._e(),"Market"===e.selectedOrderType?r("div",[r("q-card-section",[r("q-input",{attrs:{filled:"",rules:[function(t){return t>=0||e.$t("onlyPositiveNumber")}],"lazy-rules":"","hide-bottom-space":"",label:e.$t("amount")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growAmountOfShares}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reduceAmountOfShares}})]},proxy:!0}],null,!1,3137080629),model:{value:e.amountOfShares,callback:function(t){e.amountOfShares=e._n(t)},expression:"amountOfShares"}})],1),r("q-card-section",[r("q-input",{attrs:{disable:"",filled:"",label:e.$t("overallCalculatedPrice"),suffix:"€"},model:{value:e.calculatedPriceForMarketOrder,callback:function(t){e.calculatedPriceForMarketOrder=e._n(t)},expression:"calculatedPriceForMarketOrder"}})],1)],1):e._e(),"Stop-Limit"===e.selectedOrderType?r("div",[r("q-card-section",[r("q-input",{attrs:{filled:"",label:e.$t("stop"),suffix:"€"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growStopForStopLimitOrder}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reduceStopForStopLimitOrder}})]},proxy:!0}],null,!1,1784546997),model:{value:e.stopForStopLimitOrderPrice,callback:function(t){e.stopForStopLimitOrderPrice=e._n(t)},expression:"stopForStopLimitOrderPrice"}})],1),r("q-card-section",[r("q-input",{attrs:{filled:"",rules:[function(t){return t>=0||e.$t("onlyPositiveNumber")}],"lazy-rules":"","hide-bottom-space":"",label:e.$t("limit")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growLimitForStopLimitOrder}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reduceLimitForStopLimitOrder}})]},proxy:!0}],null,!1,3102914997),model:{value:e.limitForStopLimitOrderPrice,callback:function(t){e.limitForStopLimitOrderPrice=e._n(t)},expression:"limitForStopLimitOrderPrice"}})],1),r("q-card-section",[r("q-input",{attrs:{filled:"",rules:[function(t){return t>=0||e.$t("onlyPositiveNumber")}],"lazy-rules":"","hide-bottom-space":"",label:e.$t("amount")},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"add"},on:{click:e.growAmountOfShares}})]},proxy:!0},{key:"prepend",fn:function(){return[r("q-btn",{attrs:{flat:"",round:"",icon:"remove"},on:{click:e.reduceAmountOfShares}})]},proxy:!0}],null,!1,3137080629),model:{value:e.amountOfShares,callback:function(t){e.amountOfShares=e._n(t)},expression:"amountOfShares"}})],1),r("q-card-section",[r("q-input",{attrs:{disable:"",filled:"",label:e.$t("overallCalculatedPrice"),suffix:"€"},model:{value:e.calculatedPriceForStopLimitOrder,callback:function(t){e.calculatedPriceForStopLimitOrder=e._n(t)},expression:"calculatedPriceForStopLimitOrder"}})],1)],1):e._e(),r("q-space"),r("q-separator",{staticClass:"q-mx-sm"}),"Limit"===e.selectedOrderType?r("q-card-section",[r("q-btn",{staticClass:"full-width",attrs:{disable:e.amountOfShares<=0||e.limitOrderPrice<=0,label:e.$t("placeOrder"),size:"lg","no-caps":"",color:"primary"},on:{click:e.createLimitOrder}})],1):e._e(),"Market"===e.selectedOrderType?r("q-card-section",[r("q-btn",{staticClass:"full-width",attrs:{disable:e.amountOfShares<=0,label:e.$t("placeOrder"),size:"lg","no-caps":"",color:"primary"},on:{click:e.createMarketOrder}})],1):e._e(),"Stop-Limit"===e.selectedOrderType?r("q-card-section",[r("q-btn",{staticClass:"full-width",attrs:{label:e.$t("placeOrder"),size:"lg","no-caps":"",color:"primary"}})],1):e._e()],1)],1)]):e._e()},a=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pa-none full-width shadow-10 bg-dark rounded-borders",staticStyle:{height:"400px"}},[r("IEcharts",{staticClass:"q-mx-sm",attrs:{option:e.chartOption,resizable:!0}})],1)},o=[],n=r("ce44"),c={name:"StockChart",props:{historyData:{type:Array,required:!0},name:{type:String,required:!1}},data(){return{}},computed:{chartOption(){return{darkMode:!0,tooltip:{trigger:"axis",position:function(e){return[e[0],"10%"]},formatter:function(e){e=e[0];var t=new Date(e.value[0]).toLocaleDateString("de-DE")+" "+e.value[0].getHours()+":"+("0"+e.value[0].getMinutes()).slice(-2),r='<li style="list-style:none">'+e.marker+e.seriesName+"&nbsp;&nbsp;"+e.value[1]+"</li>";return t+r}},xAxis:{type:"time",boundaryGap:!1,axisLabel:{color:this.$q.dark.isActive?"#fff":"#000"}},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLabel:{color:this.$q.dark.isActive?"#fff":"#000"}},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}],series:[{name:this.name,type:"line",smooth:!0,symbol:"none",areaStyle:{},data:this.formattedData}]}},formattedData(){var e=[];return this.historyData.forEach((t=>{let r=[new Date(t.timestamp),t.price];e.push(r)})),e}},components:{IEcharts:n["a"]}},l=c,d=r("2877"),u=Object(d["a"])(l,i,o,!1,null,null,null),p=u.exports,m={name:"StockOrder",components:{StockChart:p},created(){this.stockID=this.$route.params.stockID,this.loadShareData(),this.loadShareHistoryData(),this.checkMarketOpen(),this.checker=setInterval(this.getLatestPrice,1e4)},computed:{trendPercentage(){return Number(this.stockData.price/this.stockData.priceOfLastNight*100-100).toFixed(2)},trendAbsolute(){return Number(this.stockData.price-this.stockData.priceOfLastNight).toFixed(2)},stockPrice(){return Number(this.stockData.price).toFixed(2)},limitOrderPriceDecimal(){return Number(this.limitOrderPrice).toFixed(2)},calculatedPriceForLimitOrder(){var e=Number(this.limitOrderPrice*this.amountOfShares).toFixed(2);return 0!==Number(e)?e:""},calculatedPriceForMarketOrder(){var e=Number(this.stockData.price*this.amountOfShares).toFixed(2);return 0!==Number(e)?e:""},calculatedPriceForStopLimitOrder(){var e=Number(this.limitForStopLimitOrderPrice*this.amountOfShares).toFixed(2);return 0!==Number(e)?e:""},statusColor(){return this.trendAbsolute<0?"red-7":0===Number(this.trendAbsolute)?"grey-7":"green-7"}},data(){return{selectedOrderType:"Limit",orderTypeOptions:["Limit","Market","Stop-Limit"],isBuyButtonPressed:!0,showPercentageTrendData:!0,limitOrderPrice:0,stopForStopLimitOrderPrice:0,limitForStopLimitOrderPrice:0,amountOfShares:0,stockData:[],historyData:[],marketOpen:!1,checker:null}},methods:{checkMarketOpen(){this.$axios.get(`checkIfMarketIsOpen?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}`).then((e=>{var t=e.data;t.success?this.marketOpen=t.data.marketIsOpen:console.log(t)}))},loadShareData(){this.$axios.get(`getShare?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}&shareID=${this.stockID}`).then((e=>{var t=e.data;t.success?(this.stockData=t.data,console.log(this.stockData),this.limitOrderPrice=this.stockData.price,this.getLatestPrice()):console.log(t)}))},createMarketOrder(){this.isBuyButtonPressed&&this.$axios.post(`buyOrder?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}&depotID=${this.$store.state.user.depotID}&shareID=${this.stockID}&type=${this.selectedOrderType}&amount=${this.amountOfShares}`).then((e=>{var t=e.data;if(t.success){e=t.data;console.log(e),this.amountOfShares=0}else console.log(t)}))},createLimitOrder(){this.isBuyButtonPressed&&this.$axios.post(`buyOrder?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}&depotID=${this.$store.state.user.depotID}&shareID=${this.stockID}&type=${this.selectedOrderType}&amount=${this.amountOfShares}&limit=${this.limitOrderPrice}`).then((e=>{var t=e.data;if(t.success){e=t.data;console.log(e),this.amountOfShares=0}else console.log(t)}))},loadShareHistoryData(){this.$axios.get(`getPriceDevelopmentOfShare?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}&shareID=${this.stockID}`).then((e=>{var t=e.data;t.success?(this.historyData=t.data,console.log(this.historyData)):console.log(t)}))},getLatestPrice(){this.$route.path.includes(`/order/Stock/ID=${this.stockID}`)&&this.$axios.get(`getPriceOfShare?email=${this.$store.state.user.email}&hashedPassword=${this.$store.state.user.passwordHash}&shareID=${this.stockID}`).then((e=>{var t=e.data;t.success?(this.stockData.price=t.data,console.log(t)):console.log(t)}))},toggleTrendData(){this.showPercentageTrendData=!this.showPercentageTrendData},toggleIsBuyButtonPressed(e){this.isBuyButtonPressed="Buy"===e},growPriceForLimitOrder(){this.limitOrderPrice=(parseFloat(this.limitOrderPrice)+1).toFixed(2)},reducePriceForLimitOrder(){this.limitOrderPrice=(parseFloat(this.limitOrderPrice)-1).toFixed(2)},growPriceForMarketOrder(){this.marketOrderPrice=(parseFloat(this.marketOrderPrice)+1).toFixed(2)},reducePriceForMarketOrder(){this.marketOrderPrice=(parseFloat(this.marketOrderPrice)-1).toFixed(2)},growStopForStopLimitOrder(){this.stopForStopLimitOrderPrice=(parseFloat(this.stopForStopLimitOrderPrice)+1).toFixed(2)},reduceStopForStopLimitOrder(){this.stopForStopLimitOrderPrice=(parseFloat(this.stopForStopLimitOrderPrice)-1).toFixed(2)},growLimitForStopLimitOrder(){this.limitForStopLimitOrderPrice=(parseFloat(this.limitForStopLimitOrderPrice)+1).toFixed(2)},reduceLimitForStopLimitOrder(){this.limitForStopLimitOrderPrice=(parseFloat(this.limitForStopLimitOrderPrice)-1).toFixed(2)},growAmountOfShares(){this.amountOfShares=parseInt(this.amountOfShares)+1},reduceAmountOfShares(){this.amountOfShares=parseInt(this.amountOfShares)-1}}},h=m,f=r("9989"),O=r("9c40"),b=r("2c91"),k=r("66e5"),S=r("0016"),y=r("f09f"),P=r("a370"),g=r("ddd8"),x=r("27f9"),$=r("eb85"),v=r("eebe"),q=r.n(v),F=Object(d["a"])(h,s,a,!1,null,null,null);t["default"]=F.exports;q()(F,"components",{QPage:f["a"],QBtn:O["a"],QSpace:b["a"],QItem:k["a"],QIcon:S["a"],QCard:y["a"],QCardSection:P["a"],QSelect:g["a"],QInput:x["a"],QSeparator:$["a"]})}}]);